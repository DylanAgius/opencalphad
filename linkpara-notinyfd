REM This file must be given the extension .cmd to be run on Windows
REM It compiles OC with openMP but without the popup window for opening files.
REM If you want that feature use the command file
REM linkpara

del *.o
del *.mod

REM some utilites and the command line interface
copy utilities\metlib3.F90 .
gfortran -c -O2 -Dwin metlib3.F90
del metlib3.F90

REM some routines from LAPACK and BLAS
copy numlib\oclablas.F90 .
gfortran -c -O2 oclablas.F90
del oclablas.F90

REM some more numerical routines
copy numlib\ocnum.F90 .
gfortran -c -O2 ocnum.F90
del ocnum.F90

REM the model routines
copy models\gtp3*.F90 .
gfortran -c -fopenmp -O2 gtp3.F90
del gtp3*.F90

REM the equilibrium calculation routines
copy minimizer\matsmin.F90 .
gfortran -c -fopenmp -O2 matsmin.F90
del matsmin.F90

REM the LMDIF package for least square fitting
copy numlib\lmdif1lib.F90 .
gfortran -c -O2 lmdif1lib.F90
del lmdif1lib.F90

REM the routines diagrams using STEP or MAP
copy stepmapplot\smp2*.F90 .
gfortran -c smp2.F90
del smp2*.F90

REM the user interface
copy userif\pmon6.F90 .
gfortran -c -fopenmp -Dwin pmon6.F90
del pmon6.F90

REM storing the date
gfortran -o linkoc linkocdate.F90
linkoc

del liboceq.a

REM generating the library (needed also for TQ library)
ar sq liboceq.a metlib3.o ocnum.o oclablas.o gtp3.o matsmin.o lmdif1lib.o

REM Finally linking all together
gfortran -o oc5P -fopenmp -O2 pmain1.F90 pmon6.o smp2.o liboceq.a

